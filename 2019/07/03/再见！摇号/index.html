<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  

  
  <title> 再见！摇号 | Hexo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="再见！摇号今天在知乎看到一个有关自然对数$e$的趣题：  问题：假设皇帝在宫中一共有1000位妃子，每天完全随机地抽选一位妃子来宠幸，之后妃子安然无恙地回去，如此以往重复大概3年（1000天），那么，最终有多少位妃子能够得到宠幸、又有多少得不到宠幸呢？  有位同事说随机真的很难，车牌摇号摇了3年都没有成功。这引起了我的兴趣，我想看下实际摇号3年的实际成功率会有多高。 1. 摇号中签，难！在网上找到">
<meta property="og:type" content="article">
<meta property="og:title" content=" 再见！摇号">
<meta property="og:url" content="http://example.com/2019/07/03/%E5%86%8D%E8%A7%81%EF%BC%81%E6%91%87%E5%8F%B7/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="再见！摇号今天在知乎看到一个有关自然对数$e$的趣题：  问题：假设皇帝在宫中一共有1000位妃子，每天完全随机地抽选一位妃子来宠幸，之后妃子安然无恙地回去，如此以往重复大概3年（1000天），那么，最终有多少位妃子能够得到宠幸、又有多少得不到宠幸呢？  有位同事说随机真的很难，车牌摇号摇了3年都没有成功。这引起了我的兴趣，我想看下实际摇号3年的实际成功率会有多高。 1. 摇号中签，难！在网上找到">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://ou0t3q.dm.files.1drv.com/y4mudb0L7Wk0zunvDTN_KBn6c3t-NO-HjoEwMelyjVjUNCt_tkF_-ifdae7xpMNJBqXGfDm74cLJ9bP6ENy4I_Hgii_EO4TfpjhQabEcEUARMvaoB5su0GqN7n5FP6jLtVpWL3UqwqKV-I5whha3f97bEfXZmtyxKQ6Kug1nA2cBw35ArDPOHZZdP4PccQeXyToLKuOkkrsz4WblpVibZPEQQ?width=906&height=541&cropmode=none">
<meta property="og:image" content="https://ou0q3q.dm.files.1drv.com/y4mnS7CVCY7d6e1iSy6MEhBlm5Sp0Y5i_FfkV6IynX1NuoSC9SKwn-AkSCno73uBm8bFfSl7n9W-AiHVgXtoKL9tz73y7qE6kYDFgdNUSjk4LjPQfRPtFmR5Z-dG9VDUZeY3Wdt6pXB9WbaTViP4GQOcon_V7O7NB3tQowPCD1T4tiLKp-UfJaNouPoedZiuZ5OXDIy7a-ED8glF03el1-0ow?width=906&height=541&cropmode=none">
<meta property="og:image" content="https://ou0x3q.dm.files.1drv.com/y4mjSb_iW1tjPAc10j4e8qz-BDofgb2A_GdzVbuZ-RR3_YjPPDAt5Mip1LYXYTRERrOOiPzkLNMXkVSG2jYs3f1P1s1HdwDf-kmg_ssBnI0UcIR89xVVUAuvbYCZe0VOPn1D9Kc43JTodzpDiDKgtVBIsdpSld7HLcTsdX2pMtVrMV7COgCnPC2suKuA3HCECjgVRi8EFCRo3O9CRIXdawmVA?width=1001&height=393&cropmode=none">
<meta property="article:published_time" content="2019-07-03T15:15:00.000Z">
<meta property="article:modified_time" content="2019-07-03T15:17:08.231Z">
<meta property="article:author" content="John Doe">
<meta property="article:tag" content="生活趣事">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://ou0t3q.dm.files.1drv.com/y4mudb0L7Wk0zunvDTN_KBn6c3t-NO-HjoEwMelyjVjUNCt_tkF_-ifdae7xpMNJBqXGfDm74cLJ9bP6ENy4I_Hgii_EO4TfpjhQabEcEUARMvaoB5su0GqN7n5FP6jLtVpWL3UqwqKV-I5whha3f97bEfXZmtyxKQ6Kug1nA2cBw35ArDPOHZZdP4PccQeXyToLKuOkkrsz4WblpVibZPEQQ?width=906&height=541&cropmode=none">
  
    <link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  
<link rel="stylesheet" href="/css/style.css">

<meta name="generator" content="Hexo 5.2.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Hexo</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://example.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-再见！摇号" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/07/03/%E5%86%8D%E8%A7%81%EF%BC%81%E6%91%87%E5%8F%B7/" class="article-date">
  <time datetime="2019-07-03T15:15:00.000Z" itemprop="datePublished">2019-07-03</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
       再见！摇号
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="再见！摇号"><a href="#再见！摇号" class="headerlink" title="再见！摇号"></a>再见！摇号</h1><p>今天在知乎看到一个有关自然对数$e$的趣题：</p>
<blockquote>
<p>问题：假设皇帝在宫中一共有1000位妃子，每天完全随机地抽选一位妃子来宠幸，之后妃子安然无恙地回去，如此以往重复大概3年（1000天），那么，最终有多少位妃子能够得到宠幸、又有多少得不到宠幸呢？</p>
</blockquote>
<p>有位同事说随机真的很难，车牌摇号摇了3年都没有成功。这引起了我的兴趣，我想看下实际摇号3年的实际成功率会有多高。</p>
<h2 id="1-摇号中签，难！"><a href="#1-摇号中签，难！" class="headerlink" title="1. 摇号中签，难！"></a>1. 摇号中签，难！</h2><p>在<a target="_blank" rel="noopener" href="http://jt.sz.bendibao.com/news/2017829/796316.htm">网上</a>找到了截止到2019-5月的数据：</p>
<table>
<thead>
<tr>
<th>日期</th>
<th align="right">参加人数</th>
<th align="right">车牌数量</th>
<th align="right">个人中签率</th>
</tr>
</thead>
<tbody><tr>
<td>2015年9月</td>
<td align="right">333,763</td>
<td align="right">3,300</td>
<td align="right">0.89%</td>
</tr>
<tr>
<td>2015年10月</td>
<td align="right">352,637</td>
<td align="right">3,300</td>
<td align="right">0.84%</td>
</tr>
<tr>
<td>2015年11月</td>
<td align="right">366,153</td>
<td align="right">3,340</td>
<td align="right">0.81%</td>
</tr>
<tr>
<td>2015年12月</td>
<td align="right">381,005</td>
<td align="right">3,340</td>
<td align="right">0.77%</td>
</tr>
<tr>
<td>……</td>
<td align="right">……</td>
<td align="right">……</td>
<td align="right">……</td>
</tr>
<tr>
<td>2019年1月</td>
<td align="right">1,148,965</td>
<td align="right">3,334</td>
<td align="right">0.26%</td>
</tr>
<tr>
<td>2019年2月</td>
<td align="right">1,122,238</td>
<td align="right">3,334</td>
<td align="right">0.26%</td>
</tr>
<tr>
<td>2019年3月</td>
<td align="right">1,193,483</td>
<td align="right">3,334</td>
<td align="right">0.25%</td>
</tr>
<tr>
<td>2019年4月</td>
<td align="right">1,226,867</td>
<td align="right">3,334</td>
<td align="right">0.24%</td>
</tr>
<tr>
<td>2019年5月</td>
<td align="right">1,250,269</td>
<td align="right">3,333</td>
<td align="right">0.24%</td>
</tr>
</tbody></table>
<p>我们看到，个人中签率呈现下降趋势，从首期开始摇的3年内中签的概率，对比其他时段开始摇号3年中签率是最大的，这个概率是：<br>$$<br>1 - 首期不中概率 \times 第2期不中概率 \times …… \times 第36期不中概率 \approx 15.76%<br>$$</p>
<p>如果是夫妻2人摇号，3年最大中签概率是：<br>$$<br>1- 2<em>首期不中概率 \times 2</em>第2期不中概率 \times …… \times 2*第36期不中概率 \approx 29.11%<br>$$</p>
<h2 id="2-再见！摇号"><a href="#2-再见！摇号" class="headerlink" title="2. 再见！摇号"></a>2. 再见！摇号</h2><p>那现在还在坚持摇号的同学们的机会有多大呢？</p>
<h3 id="2-1-预测个人中签率"><a href="#2-1-预测个人中签率" class="headerlink" title="2.1 预测个人中签率"></a>2.1 预测个人中签率</h3><p>有2个方案可以进行建模：</p>
<ul>
<li>方案1：直接建立<code>期数</code>与<code>个人中签率</code>的关系，由图形看到这需要一个<code>斜率下降</code>的非负曲线，使用线性模型存在缺陷<ul>
<li>2次模型已经到了拐点，数字马上向上增长，不符合实际</li>
<li>3次模型会出现赋值</li>
</ul>
</li>
<li>方案2：先预测<code>参加人数</code>，再建立<code>参加人数</code>和<code>个人中签率</code>的关系</li>
</ul>
<p><strong>预测<code>参加人数</code></strong></p>
<p><img src="https://ou0t3q.dm.files.1drv.com/y4mudb0L7Wk0zunvDTN_KBn6c3t-NO-HjoEwMelyjVjUNCt_tkF_-ifdae7xpMNJBqXGfDm74cLJ9bP6ENy4I_Hgii_EO4TfpjhQabEcEUARMvaoB5su0GqN7n5FP6jLtVpWL3UqwqKV-I5whha3f97bEfXZmtyxKQ6Kug1nA2cBw35ArDPOHZZdP4PccQeXyToLKuOkkrsz4WblpVibZPEQQ?width=906&height=541&cropmode=none" alt="参加人数 = 291597.7 + 22433.9 * 期数"></p>
<p><strong>预测<code>中签率</code></strong></p>
<p>即使模型进度而很高，也不可能预测多步之后的结果，我们这里仅仅是为了了解摇号的难度而进行大时间跨度的预测。</p>
<p>下图红色部分是对2030年之前所有<code>中签率</code>的预测：</p>
<p><img src="https://ou0q3q.dm.files.1drv.com/y4mnS7CVCY7d6e1iSy6MEhBlm5Sp0Y5i_FfkV6IynX1NuoSC9SKwn-AkSCno73uBm8bFfSl7n9W-AiHVgXtoKL9tz73y7qE6kYDFgdNUSjk4LjPQfRPtFmR5Z-dG9VDUZeY3Wdt6pXB9WbaTViP4GQOcon_V7O7NB3tQowPCD1T4tiLKp-UfJaNouPoedZiuZ5OXDIy7a-ED8glF03el1-0ow?width=906&height=541&cropmode=none"></p>
<p><strong>预测<code>累计中签率</code></strong></p>
<p>累计中签率，指的是从现在这个时间节点来看，n期内能够摇号中奖的概率。</p>
<p><img src="https://ou0x3q.dm.files.1drv.com/y4mjSb_iW1tjPAc10j4e8qz-BDofgb2A_GdzVbuZ-RR3_YjPPDAt5Mip1LYXYTRERrOOiPzkLNMXkVSG2jYs3f1P1s1HdwDf-kmg_ssBnI0UcIR89xVVUAuvbYCZe0VOPn1D9Kc43JTodzpDiDKgtVBIsdpSld7HLcTsdX2pMtVrMV7COgCnPC2suKuA3HCECjgVRi8EFCRo3O9CRIXdawmVA?width=1001&height=393&cropmode=none" alt="201906~202912累计中签率"></p>
<p>从2019年6月开始开始到2029年12月为止，==单人的中签概率仅有15%，双人仅有26%==，也就是说10年一个家庭摇号中签的概率仅有1/4，你还坚持摇吗？我反正不打算摇了，上个外地牌吧。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2019/07/03/%E5%86%8D%E8%A7%81%EF%BC%81%E6%91%87%E5%8F%B7/" data-id="ckfclsr8u00037053ddemhj8d" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E7%94%9F%E6%B4%BB%E8%B6%A3%E4%BA%8B/" rel="tag">生活趣事</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2019/07/03/%E5%90%83%E9%9D%A2%E9%AB%98%E5%88%A9%E8%B4%B7/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
           吃面高利贷
        
      </div>
    </a>
  
  
    <a href="/2017/12/05/R%E6%97%B6%E9%97%B4%E5%A4%84%E7%90%86/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title"> R时间处理</div>
    </a>
  
</nav>

  
</article>

</section>
        
          <aside id="sidebar">
  
    

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/R%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C/" rel="tag">R基本操作</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%94%9F%E6%B4%BB%E8%B6%A3%E4%BA%8B/" rel="tag">生活趣事</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/R%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C/" style="font-size: 10px;">R基本操作</a> <a href="/tags/%E7%94%9F%E6%B4%BB%E8%B6%A3%E4%BA%8B/" style="font-size: 20px;">生活趣事</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/09/">September 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/07/">July 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/12/">December 2017</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2020/09/21/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E5%B8%B8%E7%94%A8%E8%AF%84%E4%BB%B7%E6%8C%87%E6%A0%87/">(no title)</a>
          </li>
        
          <li>
            <a href="/2019/07/03/%E5%90%83%E9%9D%A2%E9%AB%98%E5%88%A9%E8%B4%B7/"> 吃面高利贷</a>
          </li>
        
          <li>
            <a href="/2019/07/03/%E5%86%8D%E8%A7%81%EF%BC%81%E6%91%87%E5%8F%B7/"> 再见！摇号</a>
          </li>
        
          <li>
            <a href="/2017/12/05/R%E6%97%B6%E9%97%B4%E5%A4%84%E7%90%86/"> R时间处理</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2020 John Doe<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  
<link rel="stylesheet" href="/fancybox/jquery.fancybox.css">

  
<script src="/fancybox/jquery.fancybox.pack.js"></script>




<script src="/js/script.js"></script>




  </div>
</body>
</html>